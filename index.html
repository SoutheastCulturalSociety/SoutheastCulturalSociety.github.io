<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Southeast Cultural Society</title>

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="assets/logo.png">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

  <style>
    /* ---------- BASIC RESET ---------- */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      scroll-behavior: smooth;
    }

    body {
      font-family: "Poppins", sans-serif;
      color: #4d1a00;
      position: relative;
      overflow-x: hidden;
      min-height: 100vh;
      background: linear-gradient(135deg, #fff1e6, #f5e0dc);
    }

    header {
      background: rgba(128,0,0,0.85);
      color: white;
      padding: 1rem;
      text-align: center;
      position: relative;
      z-index: 2;
    }

    header img.logo {
      width: 90px;
      height: auto;
    }

    nav {
      margin-top: 0.5rem;
    }

    nav a {
      color: #ffd700;
      margin: 0 12px;
      text-decoration: none;
      font-weight: 600;
    }

    nav a:hover {
      text-decoration: underline;
    }

    section {
      padding: 25px 10px;
      text-align: center;
      position: relative;
      z-index: 2;
    }

    /* ---------- HERO SECTION ---------- */
    #home {
      position: relative;
      text-align: center;
      min-height: 400px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #home .overlay {
      background: rgba(255, 248, 240, 0.85);
      padding: 50px 25px;
      border-radius: 20px;
    }

    #home h2 {
      font-size: 2.5rem;
      margin-bottom: 15px;
      color: maroon;
    }

    .join-btn {
      background: gold;
      color: maroon;
      padding: 15px 30px;
      border-radius: 12px;
      text-decoration: none;
      font-weight: 600;
      display: inline-block;
      margin-top: 20px;
      transition: all 0.3s;
    }

    .join-btn:hover {
      background: #ffd94d;
      transform: scale(1.05);
    }

    /* ---------- NEWS WHEEL ---------- */
    .news-wheel {
      background: #8b0000;
      color: #fffaf0;
      overflow: hidden;
      white-space: nowrap;
      height: 35px;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 2;
      position: relative;
      font-weight: 600;
    }

    .news-content {
      display: inline-block;
      animation: scroll 18s linear infinite;
    }

    @keyframes scroll {
      from { transform: translateX(100%); }
      to { transform: translateX(-100%); }
    }

    /* ---------- NOTICE BOARD ---------- */
    #notice-board h2 {
      margin-bottom: 20px;
      color: maroon;
    }

    .notice-section {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 30px;
    }

    .notice-card {
      background: #fffaf0;
      border-radius: 12px;
      padding: 20px;
      width: 300px;
      transition: transform 0.3s;
      box-shadow: 0 0 10px rgba(128,0,0,0.3);
    }

    .notice-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 0 15px rgba(128,0,0,0.5);
    }

    .notice-card h3 {
      color: maroon;
      margin-bottom: 8px;
    }

    .notice-card a {
      display: inline-block;
      margin-top: 8px;
      color: white;
      background: maroon;
      padding: 6px 12px;
      border-radius: 5px;
      text-decoration: none;
    }

    .notice-card a:hover {
      background: #b30000;
    }

    .notice-loading {
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.1rem;
      color: maroon;
      width: 100%;
      padding: 20px 0;
      gap: 10px;
    }

    .spinner {
      border: 4px solid #f3f3f3;
      border-top: 4px solid maroon;
      border-radius: 50%;
      width: 18px;
      height: 18px;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* ---------- ABOUT ---------- */
    #about {
      background: #fff0e6;
      border-radius: 15px;
      padding: 60px 15px;
      box-shadow: 0 0 15px rgba(128,0,0,0.3);
    }

    #about h2 {
      color: maroon;
      margin-bottom: 20px;
    }

    #about p {
      max-width: 800px;
      margin: auto;
      line-height: 1.7;
      color: #4d1a00;
    }

    /* ---------- GALLERY ---------- */
    #gallery {
      overflow: hidden;
      position: relative;
      margin-top: 40px;
    }

    #gallery h2 {
      color: maroon;
      margin-bottom: 20px;
    }

    .gallery-wrapper {
      display: flex;
      flex-direction: column;
      gap: 15px;
      width: 100%;
      overflow: hidden;
    }

    .gallery-track {
      display: flex;
      width: max-content;
    }

    .gallery-track img {
      width: 220px;
      height: 150px;
      margin: 10px;
      border-radius: 12px;
      object-fit: cover;
      transition: transform 0.3s;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
    }

    .gallery-track img:hover {
      transform: scale(1.05);
    }

    @keyframes scrollLeft {
      from { transform: translateX(0); }
      to { transform: translateX(-50%); }
    }

    @keyframes scrollRight {
      from { transform: translateX(-50%); }
      to { transform: translateX(0); }
    }

    .gallery-track.top {
      animation: scrollLeft 50s linear infinite;
    }

    .gallery-track.bottom {
      animation: scrollRight 55s linear infinite;
    }

    .view-all-btn {
      background: maroon;
      color: #ffd700;
      padding: 12px 25px;
      border-radius: 10px;
      text-decoration: none;
      font-weight: 600;
      margin-top: 25px;
      display: inline-block;
      transition: all 0.3s;
    }

    .view-all-btn:hover {
      background: #b30000;
      transform: scale(1.05);
    }

    /* ---------- MODAL FULL GALLERY ---------- */
    .modal {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.7);
      z-index: 999;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      overflow: auto;
      padding: 20px;
    }

    .modal.active {
      display: flex;
    }

    .modal-content {
      background: #fffaf0;
      border: 2px solid maroon;
      border-radius: 12px;
      padding: 20px;
      width: 90%;
      max-width: 1000px;
      height: 85%;
      max-height: 90vh;
      display: flex;
      flex-direction: column;
    }

    .modal h3 {
      color: maroon;
      margin-bottom: 15px;
      font-size: 1.8rem;
    }

    .modal-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
      gap: 10px;
      overflow-y: auto;
      padding-right: 5px;
    }

    .modal-grid img {
      width: 100%;
      height: 120px;
      object-fit: cover;
      border-radius: 8px;
      transition: transform 0.3s;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    }

    .modal-grid img:hover {
      transform: scale(1.05);
    }

    /* ---------- FIX: CLOSE BUTTON AT BOTTOM ---------- */
    .close-modal {
      background: maroon;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.3s;
      margin-top: auto; /* pushes button to bottom */
    }

    .close-modal:hover {
      background: #b30000;
    }

    @media(max-width:600px) {
      .modal-content {
        width: 95%;
        height: 80%;
        padding: 15px;
      }

      .modal h3 {
        font-size: 1.5rem;
      }

      .modal-grid img {
        height: 100px;
      }
    }

    /* ---------- CONTACT ---------- */
    #contact h2 {
      color: maroon;
      margin-bottom: 15px;
    }

    #contact p {
      margin-bottom: 10px;
    }

    #contact a {
      color: maroon;
      text-decoration: none;
    }

    #contact a:hover {
      text-decoration: underline;
    }

    /* ---------- FOOTER ---------- */
    footer {
      background: #8b0000;
      color: #fffaf0;
      text-align: center;
      padding: 12px 0;
      font-size: 0.9rem;
    }

    footer a {
      color: #ffd700;
      text-decoration: none;
      margin: 0 6px;
    }

    footer a:hover {
      text-decoration: underline;
    }

    /* ---------- PARTICLE BACKGROUND ---------- */
    #particle-bg {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
      pointer-events: none;
    }

    /* ---------- RECRUITMENT SECTION ---------- */
    #recruitment-update {
      padding: 25px 10px;
      background: #fffaf0;
      margin: 30px auto;
      border-radius: 15px;
      max-width: 1000px;
      box-shadow: 0 0 15px rgba(128,0,0,0.3);
    }

    #recruitment-update h2 {
      color: maroon;
      margin-bottom: 15px;
    }

    #recruitment-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
      margin-bottom: 15px;
    }

    .recruitment-btn {
      background: maroon;
      color: #fffaf0;
      border: none;
      padding: 8px 15px;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
    }

    .recruitment-btn:hover {
      background: #b30000;
      transform: scale(1.05);
    }

    #recruitment-list {
      max-height: 300px;
      overflow-y: auto;
      background: #fffaf0;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(128,0,0,0.3);
      position: relative;
      padding-top: 0;
    }

    .recruitment-header-container {
      position: sticky;
      top: 0;
      background: #fffaf0;
      z-index: 5;
    }

    .recruitment-header {
      display: flex;
      font-weight: 600;
      padding: 10px 15px;
      border-bottom: 1px solid maroon;
      gap: 20px;
    }

    .recruitment-header div {
      flex: 1;
      text-align: left;
    }

    .recruitment-item {
      margin-bottom: 8px;
      font-weight: 500;
      color: #4d1a00;
      display: flex;
      gap: 20px;
      padding: 5px 15px;
    }

    .recruitment-item div {
      flex: 1;
      text-align: left;
    }

    .close-recruitment-btn {
      margin-top: 10px;
      background: maroon;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.3s;
      display: none;
    }

    .close-recruitment-btn:hover {
      background: #b30000;
    }
  </style>
</head>

<body>
  <!-- Particle Background -->
  <canvas id="particle-bg"></canvas>

  <header>
    <img src="assets/logo.png" alt="Southeast Cultural Society Logo" class="logo">
    <h1>Southeast Cultural Society</h1>
    <p>Since 2010</p>
    <nav>
      <a href="#home">Home</a>
      <a href="#notice-board">Notice Board</a>
      <a href="#about">About</a>
      <a href="#gallery">Gallery</a>
      <a href="#contact">Contact</a>
      <a href="https://southeastculturalsociety.github.io/committee/" target="_blank">Committee</a>
      <a href="https://southeastculturalsociety.github.io/member/" target="_blank">Member ID</a>
    </nav>
  </header>

  <div class="news-wheel">
    <div class="news-content" id="news-wheel">Notice Headline ~ Loading...</div>
  </div>

  <section id="home">
    <div class="overlay">
      <h2>Welcome to Official Website of Southeast Cultural Society</h2>
      <p>Promoting art, culture, and unity since 2010.</p>
      <a href="https://forms.gle/your-google-form-link" class="join-btn" target="_blank">Join Us</a>
    </div>
  </section>

  <section id="notice-board">
    <h2>Notice Board</h2>
    <div class="notice-section" id="upcoming-events">
      <div class="notice-loading">
        <div class="spinner"></div>
        Loading...
      </div>
    </div>
  </section>

  <!-- ---------- RECRUITMENT UPDATE SECTION ---------- -->
  <section id="recruitment-update">
    <h2>Recruitment Update</h2>
    <p style="text-align:center; color:maroon;">Select a recruitment to view students.</p>
    <div id="recruitment-buttons">
      <div class="notice-loading">
        <div class="spinner"></div>
        Loading recruitment buttons...
      </div>
    </div>
    <div id="recruitment-list">
      <div class="recruitment-header-container">
        <div class="recruitment-header">
          <div>Name</div>
          <div>Student ID</div>
        </div>
      </div>
    </div>
    <button class="close-recruitment-btn">Close</button>
  </section>

  <section id="about">
    <h2>About Us</h2>
    <p>
      The Southeast Cultural Society (SCS) was founded in 2010 to promote cultural awareness, creativity, and artistic expression among students. We organize cultural festivals, art exhibitions, workshops, and competitions that bring together talent from across the region. The IT Department plays a vital role in supporting these initiatives by managing our digital platforms, ensuring smooth online communication, and enhancing the technical aspects of our events. <br><br>
      Our vision is to build a community that celebrates diversity and creativity through art and culture, supported by the IT Department’s efforts in leveraging technology to connect, showcase, and enhance cultural experiences.
    </p>
  </section>

  <section id="gallery">
    <h2>Gallery</h2>
    <div class="gallery-wrapper">
      <div class="gallery-track top" id="gallery-track-top"></div>
      <div class="gallery-track bottom" id="gallery-track-bottom"></div>
    </div>
    <a href="#" class="view-all-btn" id="openGallery">View Full Gallery</a>
  </section>

  <!-- Full Gallery Modal -->
  <div class="modal" id="galleryModal">
    <div class="modal-content">
      <h3>Full Gallery</h3>
      <div class="modal-grid" id="modalGalleryGrid"></div>
      <button class="close-modal" id="closeGallery">Close</button>
    </div>
  </div>

  <section id="contact">
    <h2>Contact Us</h2>
    <p>Email: <a href="mailto:southeastculturalsociety@gmail.com">southeastculturalsociety@gmail.com</a></p>
    <p>Follow us on 
      <a href="https://www.facebook.com/cultural.society.seu">Facebook</a> | 
      <a href="https://www.instagram.com/southeast_cultural_society">Instagram</a> | 
      <a href="https://www.youtube.com/@southeastculturalsociety6934">YouTube</a>
    </p>
  </section>

  <footer>
    <p>&copy; 2010–2025 Southeast Cultural Society. All Rights Reserved.</p>
  </footer>

  <script>
    // ---------- PARTICLE JS ----------
    const canvas = document.getElementById("particle-bg");
    const ctx = canvas.getContext("2d");
    let particlesArray;

    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }
    window.addEventListener("resize", resizeCanvas);
    resizeCanvas();

    class Particle {
      constructor() {
        this.x = Math.random() * canvas.width;
        this.y = Math.random() * canvas.height;
        this.size = Math.random() * 5 + 2;
        this.speedY = Math.random() * 1 + 0.2;
        this.speedX = Math.random() * 0.5 - 0.25;
        this.opacity = Math.random() * 0.5 + 0.3;
        this.color = `rgba(255, ${Math.floor(Math.random()*200+100)}, ${Math.floor(Math.random()*100)}, ${this.opacity})`;
      }
      update() {
        this.y += this.speedY;
        this.x += this.speedX;
        if(this.y>canvas.height)this.y=-this.size;
        if(this.x>canvas.width)this.x=0;
        if(this.x<0)this.x=canvas.width;
      }
      draw(){
        ctx.fillStyle=this.color;
        ctx.beginPath();
        ctx.arc(this.x,this.y,this.size,0,Math.PI*2);
        ctx.fill();
      }
    }

    function initParticles(){
      particlesArray=[];
      const num=Math.floor(window.innerWidth/8);
      for(let i=0;i<num;i++)particlesArray.push(new Particle());
    }
    initParticles();

    function animateParticles(){
      ctx.clearRect(0,0,canvas.width,canvas.height);
      for(let p of particlesArray){p.update();p.draw();}
      requestAnimationFrame(animateParticles);
    }
    animateParticles();

    // ---------- GALLERY ----------
    const galleryTop=document.getElementById('gallery-track-top');
    const galleryBottom=document.getElementById('gallery-track-bottom');
    const modalGalleryGrid=document.getElementById('modalGalleryGrid');
    const modal=document.getElementById('galleryModal');
    const openBtn=document.getElementById('openGallery');
    const closeBtn=document.getElementById('closeGallery');
    let allImages=[];

    fetch('gallery.json').then(res=>res.json()).then(images=>{
      allImages=images;
      const half=Math.ceil(images.length/2);
      const topImages=images.slice(0,half);
      const bottomImages=images.slice(half);
      function populateRow(track,imgs){
        const imgWidth=240;
        const needed=Math.ceil(window.innerWidth/imgWidth)+imgs.length;
        for(let i=0;i<needed;i++){
          const img=document.createElement('img');
          img.src=imgs[i%imgs.length];
          track.appendChild(img);
        }
      }
      populateRow(galleryTop,topImages);
      populateRow(galleryBottom,bottomImages.length?bottomImages:topImages);
    }).catch(err=>console.error('Error loading gallery:',err));

    openBtn.addEventListener('click',e=>{
      e.preventDefault();
      modal.classList.add('active');
      modalGalleryGrid.innerHTML='';
      allImages.forEach(src=>{
        const img=document.createElement('img');
        img.src=src;
        modalGalleryGrid.appendChild(img);
      });
    });

    closeBtn.addEventListener('click',()=>modal.classList.remove('active'));
    modal.addEventListener('click',e=>{if(e.target===modal)modal.classList.remove('active');});

    // ---------- NOTICES ----------
    const apiURL='https://script.google.com/macros/s/AKfycbxzp7y2TSisFBVR1OMFhWliup9muwm_akchMv8LlPio2mc8wbWaB3mmeGhy1qN6W2Filg/exec';
    const newsWheelDiv=document.getElementById('news-wheel');
    const noticeSection=document.getElementById('upcoming-events');

    fetch(apiURL).then(res=>res.json()).then(data=>{
      const headlines=data.map(n=>n['Notice Headline']).join(' — ');
      newsWheelDiv.textContent=headlines||'No notices currently.';
      noticeSection.innerHTML='';
      if(data.length===0){
        noticeSection.innerHTML='<p>No upcoming events.</p>';
      }else{
        data.forEach(n=>{
          const card=document.createElement('div');
          card.classList.add('notice-card');
          card.innerHTML=`<h3>${n['Notice Headline']||'No title'}</h3><p>${n['Notice Details']||''}</p>${n['Registration Link(if any)']?`<a href="${n['Registration Link(if any)']}" target="_blank">Register</a>`:''}`;
          noticeSection.appendChild(card);
        });
      }
    }).catch(err=>{console.error('Failed to load notices:',err);newsWheelDiv.textContent='Failed to load notices.';noticeSection.innerHTML='<p>Failed to load notices.</p>';});

    // ---------- RECRUITMENT ----------
    const recruitmentAPI='https://script.google.com/macros/s/AKfycbz7_Va4AErvFeaTjXbsxqCveIgBP61u9Bs-wKnf1leh69G_x6ZEYFZTuVSqlQsHexsQ/exec';
    const buttonsDiv=document.getElementById('recruitment-buttons');
    const listDiv=document.getElementById('recruitment-list');
    const closeRecruitBtn=document.querySelector('.close-recruitment-btn');

    fetch(recruitmentAPI).then(res=>res.json()).then(data=>{
      buttonsDiv.innerHTML='';
      if(data.success && data.data.length){
        data.data.forEach(rec=>{
          const btn=document.createElement('button');
          btn.className='recruitment-btn';
          btn.textContent=rec;
          btn.addEventListener('click',()=>{
            loadRecruitmentList(rec);
            closeRecruitBtn.style.display='inline-block'; // Show close button
          });
          buttonsDiv.appendChild(btn);
        });
      }else{
        buttonsDiv.innerHTML='<p style="color:maroon;">No recruitment data available.</p>';
      }
    }).catch(err=>{console.error('Failed to load recruitment buttons:',err);buttonsDiv.innerHTML='<p style="color:maroon;">Failed to load recruitment buttons.</p>';});

    function loadRecruitmentList(recruitmentId){
      const oldRows=listDiv.querySelectorAll('.recruitment-item, .recruitment-list-msg');
      oldRows.forEach(r=>r.remove());
      const loadingRow=document.createElement('p');
      loadingRow.style.textAlign='center';
      loadingRow.style.color='maroon';
      loadingRow.textContent='Loading...';
      loadingRow.classList.add('recruitment-list-msg');
      listDiv.appendChild(loadingRow);

      fetch(`${recruitmentAPI}?recruitment=${recruitmentId}`).then(res=>res.json()).then(data=>{
        loadingRow.remove();
        if(data.success && data.data.length){
          data.data.forEach(stu=>{
            const div=document.createElement('div');
            div.className='recruitment-item';
            div.innerHTML=`<div>${stu.Name}</div><div>${stu["Student ID"]}</div>`;
            listDiv.appendChild(div);
          });
        }else{
          const msg=document.createElement('p');
          msg.style.textAlign='center';
          msg.style.color='maroon';
          msg.classList.add('recruitment-list-msg');
          msg.textContent='No students found for this recruitment.';
          listDiv.appendChild(msg);
        }
      }).catch(err=>{
        console.error('Failed to load recruitment list:',err);
        loadingRow.remove();
        const msg=document.createElement('p');
        msg.style.textAlign='center';
        msg.style.color='maroon';
        msg.classList.add('recruitment-list-msg');
        msg.textContent='Failed to load students.';
        listDiv.appendChild(msg);
      });
    }

    closeRecruitBtn.addEventListener('click',()=>{
      const studentRows=listDiv.querySelectorAll('.recruitment-item, .recruitment-list-msg');
      studentRows.forEach(r=>r.remove());
      closeRecruitBtn.style.display='none'; // Hide button again
    });
  </script>
</body>
</html>
